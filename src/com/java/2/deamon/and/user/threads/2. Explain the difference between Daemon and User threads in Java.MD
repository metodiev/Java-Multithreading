## Why this matters

Architects must know which threads keep the JVM alive, which affects service shutdown, background tasks, and resource cleanup.

## Key Concepts

User thread: Keeps JVM alive until all user threads finish. <br>
Daemon thread: JVM exits when only daemon threads are remaining.<br>
Setting daemon: thread.setDaemon(true) (before start()). <br>
Common usage: Background monitoring, timers, cleanup threads.<br>

## Diagram 
![Diagram](images/JVM%20User%20and%20Deamon%20threads.svg)

```bash
stateDiagram-v2
[*] --> JVM_RUNNING
JVM_RUNNING --> USER_THREADS_RUNNING: user threads active
JVM_RUNNING --> ONLY_DAEMON_THREADS: all user threads finished
ONLY_DAEMON_THREADS --> JVM_EXIT: JVM terminates
```

### Architect Insights

- Daemon threads should not manage critical resources (may exit abruptly). <br>
- Often used for logging, caching, or monitoring threads.<br>
- Be careful with libraries that create daemon threads internally.<br>

## Example Code

```java
public class DaemonThreadDemo {
public static void main(String[] args) {
Thread t = new Thread(() -> {
while (true) {
System.out.println("Daemon running...");
try { Thread.sleep(500); } catch (InterruptedException e) {}
}
});
t.setDaemon(true);
t.start();
System.out.println("Main thread exiting");
}
}

```
Output: JVM exits immediately after main thread, daemon thread stops abruptly.